#include "Debugger.h"
#include <string.h>

int32_t Debugger_Init(Debugger* hDebugger, uint16_t fftlen)
{
	uint16_t half_fftlen = fftlen >> 1;

	hDebugger->fftlen = fftlen;
	hDebugger->spp = (float*)malloc(half_fftlen * sizeof(float));
	hDebugger->Npw = (float*)malloc(half_fftlen * sizeof(float));
	hDebugger->ref_pow = (float*)malloc(half_fftlen * sizeof(float));
	hDebugger->beamformed_pow = (float*)malloc(half_fftlen * sizeof(float));

	return STATUS_SUCCESS;
}

void Debugger_CopyValue(void* pSrc, void* pDst, uint32_t size)
{
	memcpy(pDst, pSrc, size);
}

int32_t Debugger_Release(Debugger* hDebugger)
{
	free(hDebugger->spp);
	free(hDebugger->Npw);
	free(hDebugger->ref_pow);
	free(hDebugger->beamformed_pow);

	return STATUS_SUCCESS;
}
